{"version":3,"file":"static/webpack/static/development/pages/commands.js.98c9b067c27f2bc642ce.hot-update.js","sources":["webpack:///./components/shader.js"],"sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  body {\\n    background: black;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createGlobalStyle } from 'styled-components';\nimport constants from 'constants';\nimport getVeda from './veda';\n\n/* babel-plugin-inline-import '../pages/index.frag' */\nvar frag = \"// Author: @amagitakayosi\\n// 2017-10-23\\nprecision mediump float;\\nuniform float time;\\nuniform vec2 mouse;\\nuniform vec2 resolution;\\nuniform sampler2D backbuffer;\\n\\n// Util functions copied from http://glslsandbox.com/e#43153.1\\nmat2 mm2(in float a){float c = cos(a), s = sin(a);return mat2(c,s,-s,c);}\\nmat2 m2 = mat2(0.95534, 0.29552, -0.29552, 0.95534);\\nfloat tri(in float x){return clamp(abs(fract(x)-.5),0.01,0.49);}\\nvec2 tri2(in vec2 p){return vec2(tri(p.x)+tri(p.y),tri(p.y+tri(p.x)));}\\n\\nfloat triNoise2d(in vec2 p, float spd)\\n{\\n  float z=1.8;\\n  float z2=2.5;\\n  float rz = 0.;\\n  p *= mm2(p.x*0.06);\\n  vec2 bp = p;\\n  for (float i=0.; i<5.; i++ )\\n  {\\n    vec2 dg = tri2(bp*1.85)*.75;\\n    dg *= mm2(time*spd);\\n    p -= dg/z2;\\n\\n    bp *= 1.3;\\n    z2 *= .45;\\n    z *= .42;\\n    p *= 1.21 + (rz-1.0)*.02;\\n\\n    rz += tri(p.x+tri(p.y))*z;\\n    p*= -m2;\\n  }\\n  return clamp(1./pow(rz*29., 1.3),0.,.55);\\n}\\n\\nvoid main() {\\n  vec2 p = (gl_FragCoord.xy * 2. - resolution) / min(resolution.x, resolution.y);\\n  float t = time * .3 + 100.;\\n\\n  p = p * .5 + 1.;\\n  p.x += 2.;  // Noises are too weak around origin\\n\\n  p /= vec2(\\n    triNoise2d(p, p.x*.002+t*.002),\\n    triNoise2d(p, p.y*.002+t*.002)\\n  ) * 20.;  // zoom factor\\n\\n  gl_FragColor = vec4(\\n    0.8 * sin(p.x * 2.3 + 2.7),\\n    0.8 * sin(p.y * 2.2 + 3.7),\\n    .8,\\n    1.0\\n  ) * .6;\\n}\\n\";\nvar DEFAULT_SHADER = {\n  attach: function attach(veda) {\n    veda.loadFragmentShader(frag);\n  }\n}; // eslint-disable-next-line\n\ncreateGlobalStyle(_templateObject());\n\nvar Shader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Shader, _React$Component);\n\n  function Shader() {\n    _classCallCheck(this, Shader);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Shader).apply(this, arguments));\n  }\n\n  _createClass(Shader, [{\n    key: \"getShader\",\n    value: function getShader() {\n      // Use DEFAULT_SHADER in mobile\n      if (window.innerWidth <= constants.mobile) {\n        return DEFAULT_SHADER;\n      }\n\n      return this.props.shader || DEFAULT_SHADER;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var shader = this.getShader();\n      setTimeout(function () {\n        var veda = getVeda();\n\n        if (shader.attach) {\n          shader.attach(veda);\n        }\n\n        veda.play();\n      }, 0);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var shader = this.getShader();\n\n      if (shader.detach) {\n        var veda = getVeda();\n        shader.detach(veda);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Shader;\n}(React.Component);\n\nexport default connect(function (s) {\n  return s;\n})(Shader);"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}